function connectWebViewJavascriptBridge(n){window.WebViewJavascriptBridge?n(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){n(WebViewJavascriptBridge)},!1)}var MoniJson={sign:1,type:1,plane_info:{}},page={init:function(){MoniJson.plane_info=Storage.get("json_plane_order_personInfo"),MoniJson.pay_info=Storage.get("air-pay-data"),this.getUrl(),this.show(),this.bing_click()},getUrl:function(){MoniJson.sign=ZSH_Extent.getPostUrl("sign"),MoniJson.type=ZSH_Extent.getPostUrl("type")},show:function(){if(1==MoniJson.sign?$("#back-info").css("visibility","hidden"):2==MoniJson.sign&&$("#back-info").css("visibility","visible"),1==MoniJson.type?($(".bg-green").css("visibility","hidden"),$(".content-sign-title").html("支付成功"),$(".content-sign-img").attr("src","../img/air/pay-success.png")):2==MoniJson.type&&($(".bg-green").css("visibility","visible"),$(".content-sign-title").html("支付失败"),$(".content-sign-img").attr("src","../img/air/pay-fail.png")),MoniJson.plane_info.go){var n=$("#go-info"),e=1*MoniJson.plane_info.go.data.split("-")[1]+"月"+1*MoniJson.plane_info.go.data.split("-")[2]+"日";n.find(".content-date").html(e),n.find(".content-time").html(MoniJson.plane_info.go.plane_info.takeOffTime),n.find(".content-logo").attr("src",MoniJson.plane_info.go.plane_info.airLogo),n.find(".content-airname").html(MoniJson.plane_info.go.plane_info.airName),n.find(".content-num").html(MoniJson.plane_info.go.plane_info.airCode+MoniJson.plane_info.go.plane_info.flightNo)}if(MoniJson.plane_info.back){var i=$("#back-info");e=1*MoniJson.plane_info.back.data.split("-")[1]+"月"+1*MoniJson.plane_info.back.data.split("-")[2]+"日",i.find(".content-date").html(e),i.find(".content-time").html(MoniJson.plane_info.back.plane_info.takeOffTime),i.find(".content-logo").attr("src",MoniJson.plane_info.back.plane_info.airLogo),i.find(".content-airname").html(MoniJson.plane_info.back.plane_info.airName),i.find(".content-num").html(MoniJson.plane_info.back.plane_info.airCode+MoniJson.plane_info.back.plane_info.flightNo)}},bing_click:function(){$(".bg-green").on("click",function(){$("#popup-pay").fadeIn(100)}),$(".air-pay-box-title").find("img").on("click",function(){$("#popup-pay").fadeOut(100)}),connectWebViewJavascriptBridge(function(n){function e(n,e){var o=document.getElementById("log"),t=document.createElement("div");t.className="logLine",t.innerHTML=i+++". "+n+":<br/>"+JSON.stringify(e),o.children.length?o.insertBefore(t,o.children[0]):o.appendChild(t)}var i=1;n.init(function(n,i){e("JS got a message",n);var o={"Javascript Responds":"Wee!"};e("JS responding with",o),i(o)}),document.getElementById("return-index").onclick=function(i){i.preventDefault(),n.callHandler("reBookPlane",null,function(n){e("reBookPlane",n)})},document.getElementById("my-order").onclick=function(e){e.preventDefault(),n.callHandler("handler：openNativeOrderList",null,function(n){})},document.getElementById("AliPay").onclick=function(i){i.preventDefault();var o=Storage.get("orderNo");n.callHandler("payPlaneTicket",{orderNo:o,payChannel:"01"},function(n){e("callback",n)})},document.getElementById("wechat").onclick=function(i){i.preventDefault();var o=Storage.get("orderNo");n.callHandler("payPlaneTicket",{orderNo:o,payChannel:"02"},function(n){console.log(n),0==n.info?self.location.href="../pages/air-successOrfail.html?sign="+MoniJson.sign+"&&type=1":self.location.href="../pages/air-successOrfail.html?sign="+MoniJson.sign+"&&type=2",e("callback",n)})}})},clear_storage:function(){Storage.remove("json_plane_order_personInfo"),Storage.remove("air-pay-data"),Storage.remove("json_plane_back"),Storage.remove("json_plane_go_index"),Storage.remove("json_plane")}};$(function(){page.init()});