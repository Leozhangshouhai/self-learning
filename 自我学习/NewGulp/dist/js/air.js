function change_Ip(e){}$(function(){air.calendar_init("ca"),air.page_click(),$("#choose-btn").find("div").first().click(),air.get_today(),air.submit_click(),air.get_3code(),air.endorsed_judge(),air.showAll()});var air={showAll:function(){$("#container").css("visibility","visible")},deadline:"",someCommonClick:function(){$("#change-position").on("click",function(){setTimeout(air.change_position,500)})},page_click:function(){$("#choose-btn").find("div").on("click",function(){if($(this).addClass("active").siblings("div").removeClass("active"),"单程"==$(this).html())json_sign.type=1,$($(".middle-time-box")[1]).hide(),$(".middle-time-p,.middle-time-week,.middle-time-time").css("text-align","center"),$(".middle-time-p").css("font-size","1.8rem"),$($(".middle-time-box")[0]).removeClass("selected").addClass("only").css({width:"100%","border-right":"none"}),$(".middle-data-img>img").attr("src","../img/air/2.png");else if("往返"==$(this).html()){json_sign.type=2,$($(".middle-time-box")[1]).show(),$(".middle-time-p,.middle-time-week,.middle-time-time").css("text-align","left"),$(".middle-time-p").css("font-size","1.2rem"),$(".middle-data-img>img").attr("src","../img/air/1.png"),$($(".middle-time-box")[0]).removeClass("only").addClass("selected").css({width:"50%","border-right":"1px solid #E0E0E0"}).siblings(".middle-time-box").removeClass("selected");$("#calendar-box").empty().append('<div id="ca"></div>'),air.calendar_init("ca")}}),$(".middle-time-box").on("click",function(){$(this).addClass("selected").siblings(".middle-time-box").removeClass("selected")}),$("#start").on("click",function(){$("#calendar-box").empty().append('<div id="ca"></div>'),air.calendar_init("ca")}),$("#end").on("click",function(){$("#calendar-box").empty().append('<div id="ca1"></div>'),air.calendar_init("ca1",air.deadline)})},calendar_init:function(e,i){var t=parseInt($("#header").css("width")),a=.85*t;$("#"+e).calendar({width:t,height:a,selectedRang:[i||new Date,null],view:"date",onSelected:function(i,t,a){var n=String(t).split(" "),o=air.judge_week(n[0]),s=air.judge_month(n[1]),d=$(this).html();"ca"==e?(air.deadline=n[3]+"/"+s+"/"+d,2==json_sign.type&&(json_sign.date=n[3]+"-"+s+"-"+d)):2==json_sign.type&&(json_sign.date_back=n[3]+"-"+s+"-"+d),1==json_sign.type&&(json_sign.date=n[3]+"-"+s+"-"+d),$(".middle-time-box.only,.middle-time-box.selected").find(".middle-time-time").html(s+"月"+d+"日").attr("year",n[3]).siblings(".middle-time-week").html(o)}})},judge_week:function(e){var i="";switch(e){case"Sun":i="周日";break;case"Mon":i="周一";break;case"Tue":i="周二";break;case"Wed":i="周三";break;case"Thu":i="周四";break;case"Fri":i="周五";break;case"Sat":i="周六"}return i},judge_week1:function(e){var i="";switch(e){case 0:i="周日";break;case 1:i="周一";break;case 2:i="周二";break;case 3:i="周三";break;case 4:i="周四";break;case 5:i="周五";break;case 6:i="周六"}return i},judge_month:function(e){var i="";switch(e){case"Jan":i=1;break;case"Feb":i=2;break;case"Mar":i=3;break;case"Apr":i=4;break;case"May":i=5;break;case"Jun":i=6;break;case"Jul":i=7;break;case"Aug":i=8;break;case"Sep":i=9;break;case"Oct":i=10;break;case"Nov":i=11;break;case"Dec":i=12}return i},get_today:function(){var e=new Date,i=e.getFullYear(),t=e.getDate(),a=air.judge_week1(Number(e.getDay())),n=parseInt(e.getMonth())+1;json_sign.date=i+"-"+n+"-"+t,json_sign.date_back=i+"-"+n+"-"+t,$(".middle-time-time").html(n+"月"+t+"日"),$(".middle-time-week").html(a)},get_3code:function(){$(".middle-data-name").on("blur",function(){console.log($(this).attr("name")),"middle-data-name-go"===$(this).attr("name")?(json_sign.scity=$(this).val(),json.code_3_go_json.parameters.keywords=encodeURI(json_sign.scity),Ajax_json(json.code_3_go_json,change_Ip)):"middle-data-name-back"===$(this).attr("name")&&(json_sign.ecity=$(this).val(),json.code_3_back_json.parameters.keywords=encodeURI(json_sign.ecity),Ajax_json(json.code_3_back_json,change_Ip))})},submit_click:function(){$(".sure-btn").on("click",function(){if(""!=$('.middle-data-name[name="middle-data-name-go"]').val()&&""!=$('.middle-data-name[name="middle-data-name-back"]').val()){json_sign.scity_3=$("#position-go").find("option:selected").attr("name"),json_sign.scity=$("#position-go").find("option:selected").attr("city-name"),json_sign.ecity_3=$("#position-back").find("option:selected").attr("name"),json_sign.ecity=$("#position-back").find("option:selected").attr("city-name"),json_sign.weekday=$("#start").find(".middle-time-week").html();var e=JSON.stringify(json_sign);Storage.set("json_plane",e);var i=null!==ZSH_Extent.getPostUrl("yiorderid")&&ZSH_Extent.getPostUrl("yiorderid");self.location.href="air-price.html?type="+json_sign.type+"&&sign="+json_sign.type+"&&yiorderid="+i}else ZSH_Extent.createLoading("出发城市不能为空")})},change_position:function(){var e=$("#position-go").clone(!0).attr("id","position-back"),i=$("#position-back").replaceWith(e).attr("id","position-go");$("#position-go").replaceWith(i);var t=$($(".middle-data-name")[0]).clone(!0).attr("name","middle-data-name-back").attr("placeholder","输入到达城市"),a=$($(".middle-data-name")[1]).clone(!0).attr("name","middle-data-name-go").attr("placeholder","输入出发城市");$($(".middle-data-name")[0]).replaceWith(a),$($(".middle-data-name")[1]).replaceWith(t)},endorsed_judge:function(){null===ZSH_Extent.getPostUrl("yiorderid")?air.someCommonClick():($("#header").hide(),Ajax_json(json.getYiorderid,change_Ip))}},json_sign={type:2,scity_3:"",scity:"",ecity:"",ecity_3:"",date:"",date_back:"",weekday:""},json={getYiorderid:{url:"http://101.37.32.245/hmp_website/yiplain/getchildorderdetailbyyiorderid.json",parameters:{yiorderid:ZSH_Extent.getPostUrl("yiorderid")},success:function(e){if(console.log(e),"000000"===e.head.rtnCode){Storage.set("yiorderidInfo",e.body),$($(".middle-data-name")[0]).val(e.body.citynamestart),$($(".middle-data-name")[1]).val(e.body.citynameend);var i=' <option value="" class="middle-data-airname-select-option"  city-name='+e.body.citynamestart+" name="+e.body.scity+">"+e.body.airportnamestart+"</option>";$("#position-go").html(i);var t=' <option value="" class="middle-data-airname-select-option" city-name='+e.body.citynameend+" name="+e.body.ecity+">"+e.body.airportnameend+"</option>";$("#position-back").html(t),$(".middle-data-name").attr("disabled","disabled")}},error:function(e){ZSH_Extent.createLoading(e.msg)}},code_3_go_json:{url:"http://101.37.32.245/hmp_website/yiplain/getairportlist.json",parameters:{keywords:encodeURI(json_sign.scity)},success:function(e){console.log(e);var i=e.body.list;if(i.length>0){$("#position-go").empty();for(var t=0;t<i.length;t++){var a=' <option value="" class="middle-data-airname-select-option"  city-name='+i[t].cityname+" name="+i[t].airport3code+">"+i[t].airportname+"</option>";$("#position-go").append(a)}}else ZSH_Extent.createLoading("城市名输入有误")}},code_3_back_json:{url:"http://118.178.225.32/hmp_website/yiplain/getairportlist.json",parameters:{keywords:encodeURI(json_sign.ecity)},success:function(e){var i=e.body.list;if(console.log(i),i.length>0){$("#position-back").empty();for(var t=0;t<i.length;t++){var a=' <option value="" class="middle-data-airname-select-option" city-name='+i[t].cityname+" name="+i[t].airport3code+">"+i[t].airportname+"</option>";$("#position-back").append(a)}}else ZSH_Extent.createLoading("城市名输入有误")}},go_json:{url:"http://118.178.225.32/hmp_website/yiplain/getplainlist.json",parameters:{type:"1",scity:json_sign.scity_3,ecity:json_sign.ecity_3,date:json_sign.date},success:function(e){console.log("单程航班"),console.log(e)}},go_back_json:{url:"http://118.178.225.32/hmp_website/yiplain/getplainlist.json",parameters:{type:"2",scity:json_sign.scity_3,ecity:json_sign.ecity_3,date:json_sign.date,date_back:json_sign.date_back},success:function(e){console.log("往返航班"),console.log(e)}}};