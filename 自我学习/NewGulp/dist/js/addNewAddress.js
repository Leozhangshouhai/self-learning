function changeIp(e){info.addaddress.url=e+"hmp_website/user/addaddress.json",info.editaddress.url=e+"hmp_website/user/updateaddress.json",info.getaddress.url=e+"hmp_website/user/getaddressdetail.json"}$("#city-picker").cityPicker({toolbarTemplate:'<header class="bar bar-nav">    <button class="button button-link pull-right close-picker">确定</button>    <h1 class="title">选择收货地址</h1>    </header>'});var info={getpageinfo:function(){var e={};e.phone=$("#phone").val(),e.name=$("#name").val(),e.address=$("#infoarea").val(),e.id=ZSH_Extent.getPostUrl("addressId");var t=$("#city-picker").val().split(" ");return e.province=t[0],e.city=t[1],e.area=t[2],e},addaddress:{url:"http://101.37.32.245/hmp_website/user/addaddress.json",parameters:{address:"",province:"",city:"",area:"",name:"",phone:""},success:function(e){console.log(e),"000000"===e.head.rtnCode&&(self.location.href="../pages/addressList.html")},error:function(e){console.log(e),ZSH_Extent.createLoading(e.head.rtnMsg)}},editaddress:{url:"http://101.37.32.245/hmp_website/user/updateaddress.json",parameters:{address:"",province:"",city:"",area:"",name:"",phone:"",id:""},success:function(e){console.log(e),"000000"===e.head.rtnCode&&(self.location.href="../pages/addressList.html")},error:function(e){console.log(e),ZSH_Extent.createLoading(e.head.rtnMsg)}},getaddress:{url:"http://101.37.32.245/hmp_website/user/getaddressdetail.json",parameters:{id:""},success:function(e){if(console.log("获取订单成功"),console.log(e),"000000"===e.head.rtnCode){var t=e.body;$("#name").val(t.name),$("#city-picker").val(t.province+" "+t.city+" "+t.area),$("#phone").val(t.phone),$("#infoarea").val(t.address),document.title="修改地址",$("endorsed").html("修改地址"),$(".make-sure-pay").html("修改")}},error:function(e){console.log(e),ZSH_Extent.createLoading(e.head.rtnMsg)}}},page={init:function(){$(".content-dd-right-img-1").on("click",function(){$("#city-picker").picker("open")}),$(".content-dd-right-img-2").click(function(){"02"===$(this).attr("index")?($(this).attr("src","../img/air/addNewAddress-03.png"),$(this).attr("index","03")):($(this).attr("src","../img/air/addNewAddress-02.png"),$(this).attr("index","02"))});var e=document.body.clientHeight-$(".header").height()-$(".make-sure-pay-box").height()-$(".contentMy").height();$("#bank").height(e+"px"),$(".make-sure-pay-box").on("click",function(){page.submitAddress()}),this.judgeEditOrAdd()},submitAddress:function(){info.addaddress.parameters=info.getpageinfo(),info.editaddress.parameters=info.getpageinfo(),""===info.addaddress.parameters.name?ZSH_Extent.createLoading("收件人不能为空"):""===info.addaddress.parameters.phone?ZSH_Extent.createLoading("联系人不能为空"):""===info.addaddress.parameters.address?ZSH_Extent.createLoading("收件地址不能为空"):""===$("#infoarea").val()?ZSH_Extent.createLoading("地址详情不能为空"):ZSH_Extent.getPostUrl("addressId")?Ajax_json(info.editaddress,changeIp):(delete info.addaddress.parameters.id,Ajax_json(info.addaddress,changeIp))},judgeEditOrAdd:function(){var e=ZSH_Extent.getPostUrl("addressId");e&&(info.getaddress.parameters.id=e,Ajax_json(info.getaddress,changeIp))}};$(function(){$("#container").css("visibility","visible"),page.init()});